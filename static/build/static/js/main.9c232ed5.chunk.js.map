{"version":3,"sources":["index.js"],"names":["ResultListWrapper","ReactiveList","config","set","elasticsearch","base_uri","client","axios","create","baseURL","get","json","advanced_query","Main","value","query","range","gte","moment","start","format","lte","end","bool","must","app","url","theme","typography","fontFamily","transformRequest","request","request_body","body","split","sT","document","getElementById","console","log","length","body_preference","JSON","parse","body_query","preference","should","multi_match","method","data","stringify","headers","className","componentId","dataField","customQuery","props","fields","fuzziness","highlight","highlightField","placeholder","title","react","and","or","size","showClearAll","clearAllLabel","pagination","loader","render","map","res","key","_id","Content","Title","dangerouslySetInnerHTML","__html","Description","Component","rootElement","ReactDOM"],"mappings":"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","file":"static/js/main.9c232ed5.chunk.js","sourcesContent":["/*\n * @Author: Chris\n * Created Date: 2019-10-22 14:33:57\n * -----\n * Last Modified: 2019-10-31 15:45:11\n * Modified By: Chris\n * -----\n * Copyright (c) 2019\n */\n\nimport React, { Component } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport moment from 'moment';\nimport {\n    ReactiveBase,\n    ResultList,\n    ReactiveList,\n    MultiList,\n    MultiDropdownList,\n    DataSearch,\n    SelectedFilters,\n    DateRange\n} from \"@appbaseio/reactivesearch\";\nimport axios from \"axios\";\nimport \"./styles.css\";\nimport config from 'react-global-configuration';\n\nconst { ResultListWrapper } = ReactiveList;\n\n// Global Configurations\nconfig.set({\n    // elasticsearch: \"http://localhost:9200/\",\n    // base_uri: \"http://0.0.0.0:3000\"\n    elasticsearch: \"http://2001.0468.0c80.6102.0001.7015.3fbb.aa59.ip6.name:9200/\",\n    base_uri: \"http://2001.0468.0c80.6102.0001.7015.bf2d.eb25.ip6.name:3000\"\n});\n\nconst client = axios.create({\n    baseURL: config.get(\"base_uri\"),\n    json: true\n});\n\nvar advanced_query = [\"degree-level\", \"contributor-department\", \"contributor-author\",\n    \"contributor-committeechair\", \"contributor-committeecochair\",\n    \"contributor-committeemember\", \"date-available\", \"date-issued\",\n    \"degree-name\", \"description-abstract\", \"Author Email\", \"subject-none\",\n    \"title-none\", \"type-none\"];\n// this.customQuery=function(gvalue) {\n//   return {\n//     \"query\": {\n//       \"simple_query_string\" : {\n//        \"query\": gvalue,\n//        \"fields\": [\"Title\"]\n//    }\n//\n//     }\n//   }\n// }\n\nclass Main extends Component {\n    dateQuery(value) {\n        let query = null;\n        if (value) {\n            query = [\n                {\n                    range: {\n                        \"Document_Date\": {\n                            gte: moment(value.start).format('YYYY-MM-DD'),\n                            lte: moment(value.end).format('YYYY-MM-DD'),\n                        },\n                    },\n                },\n            ];\n        }\n        return query ? { query: { bool: { must: query } } } : null;\n    }\n\n    render() {\n        return (\n            <ReactiveBase\n                app=\"etd_metadata\"\n                // credentials=\"egdxpZGTu:54c431d1-6a44-44b8-b84a-e46c4fed2de6\"\n                url={config.get('elasticsearch')}\n                theme={{\n                    typography: {\n                        fontFamily:\n                            '\"Lato\", \"Open Sans\", \"Montserrat\", -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Noto Sans\", \"Ubuntu\", \"Droid Sans\", \"Helvetica Neue\", sans-serif'\n                    }\n                }}\n                transformRequest={request => {\n                    // Auto-suggestions start from 3rd characters\n                    var request_body = request.body.split('\\n');\n\n\n                    var searchText = document.getElementById(\"search-downshift-input\").value;\n                    // console.log(\"The search bar says: \"+ searchText);\n                    var sT = searchText.split(\":\");\n                    console.log(\"The length of the split is \" + sT.length);\n                    if (sT.length > 1) //the first part of the split should be the relevant field\n                    {\n                        advanced_query = [\"title-none\"];\n                    }\n                    else {   //if it isn't an advanced query then reset it to match all the fields\n                        advanced_query = [\"degree-level\", \"contributor-department\", \"contributor-author\",\n                            \"contributor-committeechair\", \"contributor-committeecochair\",\n                            \"contributor-committeemember\", \"date-available\", \"date-issued\",\n                            \"degree-name\", \"description-abstract\", \"Author Email\", \"subject-none\",\n                            \"title-none\", \"type-none\"];\n\n                    }\n\n                    var body_preference = JSON.parse(request_body[0])\n                    var body_query = JSON.parse(request_body[1])\n\n                    console.log(\"The body_query is: \" + request_body[1]);\n\n                    if (body_preference.preference === \"search\") {\n                        if (body_query.query.bool.must[0].bool.must[0].bool.should[0].multi_match.query.length < 3) {\n                            return null;\n                        }\n                    }\n\n                    // Post logs\n                    client({\n                        method: 'post',\n                        url: '/emitlogs',\n                        data: JSON.stringify(request),\n                        headers: {\n                            \"Content-Type\": \"application/json\",\n                        }\n                    });\n                    return request\n                }} //TODO: replace with apiClient function to send request to back-end (Flask API)\n            >\n                <div className=\"fek-searching\">\n                    <div className=\"searchbar\">\n                        <DataSearch\n                            componentId=\"search\"\n                            dataField={[\"degree-level\", \"contributor-department\", \"contributor-author\",\n                                \"contributor-committeechair\", \"contributor-committeecochair\",\n                                \"contributor-committeemember\", \"date-available\", \"date-issued\",\n                                \"degree-name\", \"description-abstract\", \"Author Email\", \"subject-none\",\n                                \"title-none\", \"type-none\"]}\n                            customQuery={\n                                function (value, props) {\n                                    return {\n                                        query: {\n                                            multi_match: {\n                                                query: value,\n                                                fields: advanced_query\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            // fieldWeights={[1, 3, 1, 1, 1, 1, 5, 1]}\n                            fuzziness={0}\n                            // debounce={100}\n                            highlight={true}\n                            highlightField={[\"degree-level\", \"contributor-department\", \"contributor-author\",\n                                \"contributor-committeechair\", \"contributor-committeecochair\",\n                                \"contributor-committeemember\", \"date-available\", \"date-issued\",\n                                \"degree-name\", \"description-abstract\", \"Author Email\", \"subject-none\",\n                                \"title-none\", \"type-none\"]}\n                            placeholder=\"Search Tobacco\"\n                            title=\"Search for Tobacco\"\n                            react={{\n                                and: [\"degree-level\", \"contributor-department\", \"contributor-author\",\n                                    \"contributor-committeechair\", \"contributor-committeecochair\",\n                                    \"contributor-committeemember\", \"date-available\", \"date-issued\",\n                                    \"degree-name\", \"description-abstract\", \"Author Email\", \"subject-none\",\n                                    \"type-none\"],\n                                or: [\"title-none\"]\n                            }}\n                        // renderNoSuggestion={() => (\n                        //     <div>\n                        //         No suggestions found\n                        // </div>\n                        // )}\n\n                        />\n                    </div>\n\n                    <div className=\"container\">\n                        <div>\n                            <MultiList\n                                componentId=\"filter_type-none\"\n                                title=\"type-none\"\n                                dataField=\"type-none\"\n                                size={100}\n                                className=\"filter\"\n                            />\n\n                            <MultiList\n                                componentId=\"filter_degree-level\"\n                                dataField=\"degree-level\"\n                                size={100}\n                                title=\"degree-level\"\n                                className=\"filter\"\n                            />\n\n                            {/* <DateRange\n                                componentId=\"filter_Document_Date\"\n                                dataField=\"Document_Date\"\n                                title=\"Document_Date\"\n                                // customQuery={this.dateQuery}\n                                focused={false}\n                                autoFocusEnd={true}\n                                numberOfMonths={1}\n                                initialMonth={new Date('2019-10-01')}\n                            /> */}\n\n                        </div>\n\n                        <div>\n                            <SelectedFilters\n                                showClearAll={true}\n                                clearAllLabel=\"Clear filters\"\n                            />\n                            <ReactiveList\n                                componentId=\"List\"\n                                dataField=\"Title\"\n                                pagination={true}\n                                className=\"result\"\n                                size={5}\n                                loader=\"Loading Results..\"\n                                react={{\n                                    and: [\"filter_type-none\", \"filter_degree-level\", \"search\"]\n                                }}\n                                render={({ data }) => (\n                                    <ResultListWrapper>\n                                        {data.map(res => (\n                                            <ResultList key={res._id}>\n                                                {/* <ResultList.Image src={res.image} /> */}\n                                                <ResultList.Content>\n                                                    <ResultList.Title>\n                                                        <div\n                                                            className=\"book-title\"\n                                                            dangerouslySetInnerHTML={{\n                                                                __html: \"<a href=\\\"\" + \"#res.url\" + \"\\\">\\n\" + res[\"title-none\"] + \"</a>\",\n                                                            }}\n                                                        />\n                                                    </ResultList.Title>\n                                                    <ResultList.Description>\n                                                        <div className=\"flex column justify-space-between\">\n                                                            <div>\n                                                                <div>\n                                                                    by{' '}\n                                                                    {/* <span className=\"authors-list\">\n                                                                        {res.Witness_Name}\n                                                                    </span> */}\n                                                                    <div\n                                                                        className=\"authors-list\"\n                                                                        dangerouslySetInnerHTML={{\n                                                                            __html: res[\"contributor-author\"] + ', ' + res[\"contributor-committeechair\"] + ', ' + res[\"contributor-committeecochair\"] + ', ' + res[\"contributor-committeemember\"],\n                                                                        }}\n                                                                    />\n                                                                </div>\n                                                                {/* <div className=\"ratings-list flex align-center\">\n                                                                <span className=\"stars\">\n                                                                    {Array(res.average_rating_rounded)\n                                                                        .fill('x')\n                                                                        .map((\n                                                                            res, // eslint-disable-line\n                                                                            index,\n                                                                        ) => (\n                                                                                <i\n                                                                                    className=\"fas fa-star\"\n                                                                                    key={index} // eslint-disable-line\n                                                                                />\n                                                                            ))}\n                                                                </span>\n                                                                <span className=\"avg-rating\">\n                                                                    ({res.average_rating} avg)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t        </span>\n                                                            </div> */}\n                                                            </div>\n                                                            <span className=\"pub-year\">\n                                                                Pub: {res[\"date-issued\"]}\n                                                            </span>\n                                                            <div\n                                                                className=\"book-text\"\n                                                                dangerouslySetInnerHTML={{\n                                                                    __html: res[\"description-abstract\"],\n                                                                }}\n                                                            />\n                                                            <div\n                                                                className=\"book-text\"\n                                                                dangerouslySetInnerHTML={{\n                                                                    __html: res[\"subject-none\"],\n                                                                }}\n                                                            />\n                                                        </div>\n                                                    </ResultList.Description>\n\n                                                </ResultList.Content>\n                                            </ResultList>\n                                        ))}\n                                    </ResultListWrapper>\n                                )}\n\n                            />\n                        </div>\n                    </div>\n                </div>\n            </ReactiveBase >\n        );\n    }\n}\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<Main />, rootElement);\n"],"sourceRoot":""}